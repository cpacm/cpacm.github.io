<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Rxjava使用帮助 | cpacm</title><meta name="description" content="RxJava – Reactive Extensions for the JVM – a library for composing asynchronous and event-based programs using observable sequences for the Java VM.Rxjava是一个在 Java VM 上使用可观测的序列来组成异步的、基于事件的程序。换句话说就是利用观察者模式实现异步操作的一个库。"><meta name="keywords" content="Android,java"><meta name="author" content="cpacm,348515494@qq.com"><meta name="copyright" content="cpacm"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://www.cpacm.net/2016/09/21/Rxjava使用帮助/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Rxjava使用帮助"><meta name="twitter:description" content="RxJava – Reactive Extensions for the JVM – a library for composing asynchronous and event-based programs using observable sequences for the Java VM.Rxjava是一个在 Java VM 上使用可观测的序列来组成异步的、基于事件的程序。换句话说就是利用观察者模式实现异步操作的一个库。"><meta name="twitter:image" content="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/rxjava.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Rxjava使用帮助"><meta property="og:url" content="http://www.cpacm.net/2016/09/21/Rxjava使用帮助/"><meta property="og:site_name" content="cpacm"><meta property="og:description" content="RxJava – Reactive Extensions for the JVM – a library for composing asynchronous and event-based programs using observable sequences for the Java VM.Rxjava是一个在 Java VM 上使用可观测的序列来组成异步的、基于事件的程序。换句话说就是利用观察者模式实现异步操作的一个库。"><meta property="og:image" content="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/rxjava.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="开源客户端：Beats —— 一款基于萌否网站api的音乐管理软件" href="http://www.cpacm.net/2016/10/30/Beats——一款基于萌否网站api的音乐管理软件/"><link rel="next" title="开源项目：一个高度自由的轻量化Slider" href="http://www.cpacm.net/2016/06/03/开源项目：一个高度自由的轻量化Slider/"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-143443034-1', 'auto');
ga('send', 'pageview');
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"cookieDomain":"http://cpacm.net/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简介"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#链式调用"><span class="toc-number">1.1.</span> <span class="toc-text">链式调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">2.</span> <span class="toc-text">介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Observer-——-观察者"><span class="toc-number">2.1.</span> <span class="toc-text">Observer —— 观察者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Observable-——-被观察者"><span class="toc-number">2.2.</span> <span class="toc-text">Observable —— 被观察者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subscribe-——-订阅"><span class="toc-number">2.3.</span> <span class="toc-text">subscribe() —— 订阅</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件变换"><span class="toc-number">2.4.</span> <span class="toc-text">事件变换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scheduler"><span class="toc-number">3.</span> <span class="toc-text">Scheduler</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Subject-Observable-Observer"><span class="toc-number">4.</span> <span class="toc-text">Subject = Observable + Observer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PublishSubject"><span class="toc-number">4.1.</span> <span class="toc-text">PublishSubject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BehaviorSubject"><span class="toc-number">4.2.</span> <span class="toc-text">BehaviorSubject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ReplaySubject"><span class="toc-number">4.3.</span> <span class="toc-text">ReplaySubject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AsyncSubject"><span class="toc-number">4.4.</span> <span class="toc-text">AsyncSubject</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operator-——-操作符（事件变换）"><span class="toc-number">5.</span> <span class="toc-text">Operator —— 操作符（事件变换）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#原理"><span class="toc-number">5.1.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#延伸"><span class="toc-number">5.2.</span> <span class="toc-text">延伸</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#与Retrofit的结合"><span class="toc-number">5.2.1.</span> <span class="toc-text">与Retrofit的结合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RxBinding"><span class="toc-number">5.2.2.</span> <span class="toc-text">RxBinding</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RxBus"><span class="toc-number">5.2.3.</span> <span class="toc-text">RxBus</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rxjava-各类操作符实例"><span class="toc-number">6.</span> <span class="toc-text">Rxjava 各类操作符实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建类Obervable"><span class="toc-number">6.1.</span> <span class="toc-text">创建类Obervable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#create"><span class="toc-number">6.1.1.</span> <span class="toc-text">create</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#defer"><span class="toc-number">6.1.2.</span> <span class="toc-text">defer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Empty-Never-Throw"><span class="toc-number">6.1.3.</span> <span class="toc-text">Empty/Never/Throw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#from"><span class="toc-number">6.1.4.</span> <span class="toc-text">from</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#interval"><span class="toc-number">6.1.5.</span> <span class="toc-text">interval</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#just"><span class="toc-number">6.1.6.</span> <span class="toc-text">just</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Range"><span class="toc-number">6.1.7.</span> <span class="toc-text">Range</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#repeat"><span class="toc-number">6.1.8.</span> <span class="toc-text">repeat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#start"><span class="toc-number">6.1.9.</span> <span class="toc-text">start</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#timer"><span class="toc-number">6.1.10.</span> <span class="toc-text">timer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变换类Obervable"><span class="toc-number">6.2.</span> <span class="toc-text">变换类Obervable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Buffer"><span class="toc-number">6.2.1.</span> <span class="toc-text">Buffer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Map"><span class="toc-number">6.2.2.</span> <span class="toc-text">Map</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FlatMap"><span class="toc-number">6.2.3.</span> <span class="toc-text">FlatMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ConcatMap"><span class="toc-number">6.2.4.</span> <span class="toc-text">ConcatMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SwitchMap"><span class="toc-number">6.2.5.</span> <span class="toc-text">SwitchMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GroupBy"><span class="toc-number">6.2.6.</span> <span class="toc-text">GroupBy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scan"><span class="toc-number">6.2.7.</span> <span class="toc-text">Scan</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#window"><span class="toc-number">6.2.8.</span> <span class="toc-text">window</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤类Obervable"><span class="toc-number">6.3.</span> <span class="toc-text">过滤类Obervable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Debounce"><span class="toc-number">6.3.1.</span> <span class="toc-text">Debounce</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Distinct"><span class="toc-number">6.3.2.</span> <span class="toc-text">Distinct</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ElementAt-elementAtOrDefault"><span class="toc-number">6.3.3.</span> <span class="toc-text">ElementAt/elementAtOrDefault</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">6.3.4.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#First-last"><span class="toc-number">6.3.5.</span> <span class="toc-text">First/last</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ignoreElements"><span class="toc-number">6.3.6.</span> <span class="toc-text">ignoreElements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sample"><span class="toc-number">6.3.7.</span> <span class="toc-text">Sample</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#take-takeLast"><span class="toc-number">6.3.8.</span> <span class="toc-text">take/takeLast</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#skip-skipLast"><span class="toc-number">6.3.9.</span> <span class="toc-text">skip/skipLast</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合类Obervable"><span class="toc-number">6.4.</span> <span class="toc-text">组合类Obervable</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#And-Then-When"><span class="toc-number">6.4.1.</span> <span class="toc-text">And/Then/When</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#combineLatest"><span class="toc-number">6.4.2.</span> <span class="toc-text">combineLatest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join"><span class="toc-number">6.4.3.</span> <span class="toc-text">join</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#merge"><span class="toc-number">6.4.4.</span> <span class="toc-text">merge</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zip"><span class="toc-number">6.4.5.</span> <span class="toc-text">zip</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他操作符"><span class="toc-number">6.5.</span> <span class="toc-text">其他操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#StrictMode"><span class="toc-number">6.6.</span> <span class="toc-text">StrictMode</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文章"><span class="toc-number">7.</span> <span class="toc-text">参考文章</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/rxjava.jpg)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">cpacm</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="/img/author.jpg" onerror="onerror=null;src='/img/friend_404.gif'"><div class="mobile_author-info__description">请不要忘记，那给你带来感动的，名为二次元的理想乡。</div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Rxjava使用帮助</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2016-09-21<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-07-10</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Android/">Android</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">5.5k</span><span class="post-meta__separator">|</span><span>阅读时长: 23 分钟</span><span class="post-meta__separator">|</span><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>RxJava – Reactive Extensions for the JVM – a library for composing asynchronous and event-based programs using observable sequences for the Java VM.</code><br>Rxjava是一个在 Java VM 上使用可观测的序列来组成异步的、基于事件的程序。换句话说就是利用观察者模式实现异步操作的一个库。</p>
<h3 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h3><p>比如说这么一个情景：<br><code>用户输入用户名密码进行登录，同时保存用户信息到本地数据库，之后利用获取的token去服务器获取书籍列表信息，并从书籍信息中找出类型为推理的小说显示到界面。</code></p>
<p>首先我们使用普通的java来实现，它的代码将如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//登录</span></span><br><span class="line">login(username, password, <span class="keyword">new</span> CallBack&lt;User&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(User data)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//保存信息到数据库</span></span><br><span class="line">        saveToDao(data);</span><br><span class="line">        <span class="comment">//获取token</span></span><br><span class="line">        <span class="keyword">final</span> String token = data.getToken();</span><br><span class="line">        <span class="comment">//请求书籍列表</span></span><br><span class="line">        getBookList(token, <span class="keyword">new</span> CallBack&lt;List&lt;Book&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(List&lt;Book&gt; data)</span> </span>&#123;</span><br><span class="line">                MainActivity.<span class="keyword">this</span>.runOnUiThread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                        <span class="comment">//对书籍信息进行筛选并显示到UI界面中</span></span><br><span class="line">                        <span class="keyword">for</span> (Book b : data) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (b.getType().equals(<span class="string">"推理"</span>)) &#123;</span><br><span class="line">                                showDataToScreen(b);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>而如果使用rxjava会变成这样子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable&lt;User&gt; <span class="title">login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">login(username, password)</span><br><span class="line">    .subscribeOn(Schedulers.io())</span><br><span class="line">    .observeOn(Schedulers.io())</span><br><span class="line">    .map(<span class="keyword">new</span> Func1&lt;User, String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">            saveToDao(user);</span><br><span class="line">            <span class="keyword">return</span> user.getToken();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .flatMap(<span class="keyword">new</span> Func1&lt;String, Observable&lt;List&lt;Book&gt;&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Observable&lt;List&lt;Book&gt;&gt; call(String s) &#123;</span><br><span class="line">            <span class="keyword">return</span> getBookList(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .flatMap(<span class="keyword">new</span> Func1&lt;List&lt;Book&gt;, Observable&lt;Book&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Observable&lt;Book&gt; <span class="title">call</span><span class="params">(List&lt;Book&gt; books)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Observable.from(books);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .filter(<span class="keyword">new</span> Func1&lt;Book, Boolean&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> book.getType().equals(<span class="string">"推理"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;Book&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Book book)</span> </span>&#123;</span><br><span class="line">            showDataToScreen(book);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>是不是变得很舒服，起码看上去简洁多了。<br>再使用 java8 试试，看上去又不一样了<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">login(username, password)</span><br><span class="line">    .subscribeOn(Schedulers.io())</span><br><span class="line">    .observeOn(Schedulers.io())</span><br><span class="line">    .map(user -&gt; &#123;</span><br><span class="line">        saveToDao(user);</span><br><span class="line">        <span class="keyword">return</span> user.getToken();</span><br><span class="line">    &#125;)</span><br><span class="line">    .flatMap(s -&gt; getBookList(s))</span><br><span class="line">    .flatMap(books -&gt; Observable.from(books))</span><br><span class="line">    .filter(book -&gt; book.getType().equals(<span class="string">"推理"</span>))</span><br><span class="line">    .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">    .subscribe(<span class="keyword">this</span>::showDataToScreen);</span><br></pre></td></tr></table></figure></p>
<p>当一个业务需求很长时，使用平时的方法难免会陷入缩进的陷阱中，等过了一段时间后回头再看自己的代码又必须要重头梳理一遍。而使用rxjava,虽然看起来也是很长，但是一条链式调用就能满足整个需求，很长但很清晰。</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>前面也提到过 <code>rxjava</code> 是一个利用观察者模式实现异步操作的库，使用 <code>rxjava</code> 必须要明白一下四个概念（Observable，Observer，subscribe ，事件）, Observable 和 Observer 通过 subscribe() 方法实现订阅关系，从而 Observable 可以在需要的时候发出事件来通知 Observer。</p>
<h3 id="Observer-——-观察者"><a href="#Observer-——-观察者" class="headerlink" title="Observer —— 观察者"></a>Observer —— 观察者</h3><p>Observer 和 Subscriber(继承自Observer) 都属于观察者，它们决定观察者被触发后所做的操作。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Subscriber&lt;String&gt; subscriber = <span class="keyword">new</span> Subscriber&lt;String&gt;() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>onStart()</code> 是在产生 <code>subscribe()</code>  订阅动作之后调用，可以做一些初始化，发生在 <code>onNext()</code> 之前。</li>
<li><code>onCompleted()</code> 是在整个序列发生结束后调用。</li>
<li><code>onError()</code> 是在序列发生错误时发生，它与 <code>onCompleted()</code> 互斥。</li>
</ul>
<h3 id="Observable-——-被观察者"><a href="#Observable-——-被观察者" class="headerlink" title="Observable —— 被观察者"></a>Observable —— 被观察者</h3><p>它决定什么时候触发 Observer , Rxjava 通过 create() 方法来建立一个被观察者（也可以通过操作符建立）。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span></span>&#123;</span><br><span class="line">            subscriber.onNext(<span class="string">"cpacm"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="subscribe-——-订阅"><a href="#subscribe-——-订阅" class="headerlink" title="subscribe() —— 订阅"></a>subscribe() —— 订阅</h3><p>当 <code>Observable</code> 调用 subscribe() 时就会触发其 <code>call()</code> 方法产生动作。<strong>所以记住，所有的动作都是在subscribe()订阅后才开始进行</strong>。<br>除去完整的 <code>Subscriber</code>，还有不完整的 <code>Action</code> 可供调用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动创建 Subscriber ，并使用 onNextAction 来定义 onNext()</span></span><br><span class="line">observable.subscribe(onNextAction);</span><br><span class="line"><span class="comment">// 自动创建 Subscriber ，并使用 onNextAction 和 onErrorAction 来定义 onNext() 和 onError()</span></span><br><span class="line">observable.subscribe(onNextAction, onErrorAction);</span><br><span class="line"><span class="comment">// 自动创建 Subscriber ，并使用 onNextAction、 onErrorAction 和 onCompletedAction 来定义 onNext()、 onError() 和 onCompleted()</span></span><br><span class="line">observable.subscribe(onNextAction, onErrorAction, onCompletedAction);</span><br></pre></td></tr></table></figure></p>
<h3 id="事件变换"><a href="#事件变换" class="headerlink" title="事件变换"></a>事件变换</h3><p>所谓变换，就是将事件序列中的对象或整个序列进行加工处理，转换成不同的事件或事件序列。这部分先放着，我们先看看线程操作。</p>
<h2 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h2><p>在RxJava 中，Scheduler —— 调度器，相当于线程控制器，RxJava 通过它来指定每一段代码应该运行在什么样的线程。</p>
<blockquote>
<ul>
<li>Schedulers.immediate(): 直接在当前线程运行，相当于不指定线程。这是默认的 Scheduler。</li>
<li>Schedulers.newThread(): 总是启用新线程，并在新线程执行操作。</li>
<li>Schedulers.io(): I/O 操作（读写文件、读写数据库、网络信息交互等）所使用的 Scheduler。行为模式和 newThread() 差不多，区别在于 io() 的内部实现是是用一个无数量上限的线程池，可以重用空闲的线程，因此多数情况下 io() 比 newThread() 更有效率。不要把计算工作放在 io() 中，可以避免创建不必要的线程。</li>
<li>Schedulers.computation(): 计算所使用的 Scheduler。这个计算指的是 CPU 密集型计算，即不会被 I/O 等操作限制性能的操作，例如图形的计算。这个 Scheduler 使用的固定的线程池，大小为 CPU 核数。不要把 I/O 操作放在 computation() 中，否则 I/O 操作的等待时间会浪费 CPU。</li>
<li>AndroidSchedulers.mainThread()，它指定的操作将在 Android 主线程运行。</li>
</ul>
</blockquote>
<p>在 Rxjava 中，可以通过<code>subscribeOn()</code> 和 <code>observeOn()</code> 对线程进行控制。<br><code>subscribeOn()</code> 指定被观察者即 Observable 动作发生所在线程。只能指定一次。<br><code>observeOn()</code> 控制下一层 subscriber 发生的线程，若想多次切换线程时则可以多次调用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="comment">// IO 线程，由 subscribeOn() 指定</span></span><br><span class="line">    .subscribeOn(Schedulers.io())</span><br><span class="line">    .observeOn(Schedulers.newThread())</span><br><span class="line">    .map(mapOperator) <span class="comment">// 新线程，由 observeOn() 指定</span></span><br><span class="line">    .observeOn(Schedulers.io())</span><br><span class="line">    .map(mapOperator2) <span class="comment">// IO 线程，由 observeOn() 指定</span></span><br><span class="line">    .observeOn(AndroidSchedulers.mainThread) </span><br><span class="line">    .subscribe(subscriber);  <span class="comment">// Android 主线程，由 observeOn() 指定</span></span><br></pre></td></tr></table></figure></p>
<p><em>Observable.doOnSubscribe():它和 Subscriber.onStart() 同样是在 subscribe() 调用后而且在事件发送前执行，但区别在于它可以指定线程。在 doOnSubscribe()的后面跟一个 subscribeOn() ，就能指定准备工作的线程了。</em></p>
<h2 id="Subject-Observable-Observer"><a href="#Subject-Observable-Observer" class="headerlink" title="Subject = Observable + Observer"></a>Subject = Observable + Observer</h2><p>如标题所示，Subject既可以像Observer订阅一个Observable，也可以像Observable发射一个新的数据。rxjava中提供了四种Subject</p>
<h3 id="PublishSubject"><a href="#PublishSubject" class="headerlink" title="PublishSubject"></a>PublishSubject</h3><p>利用Subject实现传统的Observable + Observer<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">PublishSubject&lt;String&gt; stringPublishSubject = PublishSubject.create();</span><br><span class="line">Subscription subscriptionPrint = stringPublishSubject.subscribe(<span class="keyword">new</span> Observer&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Observable completed"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Oh,no!Something wrong happened!"</span>);                </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        System.out.println(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">stringPublishSubject.onNext(<span class="string">"Hello World"</span>);</span><br></pre></td></tr></table></figure></p>
<p>与之前的Observable不一样，调用subscribe()并不会发送数据，因为没有数据可以发送，所以subject会一直等待，等待subject调用onNext手动发送数据来触发。Rxbus 就是利用 subject 的这个特性来实现的。</p>
<h3 id="BehaviorSubject"><a href="#BehaviorSubject" class="headerlink" title="BehaviorSubject"></a>BehaviorSubject</h3><p>简单的说，BehaviorSubject会首先向他的订阅者发送截至订阅前最新的一个数据对象（或初始值）,然后正常发送订阅后的数据流。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BehaviorSubject&lt;Integer&gt; behaviorSubject = BehaviorSubject.create(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="ReplaySubject"><a href="#ReplaySubject" class="headerlink" title="ReplaySubject"></a>ReplaySubject</h3><p>ReplaySubject会缓存它所订阅的所有数据,向任意一个订阅它的观察者重发:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReplaySubject&lt;Integer&gt; replaySubject = ReplaySubject.create();</span><br></pre></td></tr></table></figure></p>
<h3 id="AsyncSubject"><a href="#AsyncSubject" class="headerlink" title="AsyncSubject"></a>AsyncSubject</h3><p>当Observable完成时AsyncSubject只会发布最后一个数据给已经订阅的每一个观察者。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AsyncSubject&lt;Integer&gt; asyncSubject = AsyncSubject.create();</span><br></pre></td></tr></table></figure></p>
<h2 id="Operator-——-操作符（事件变换）"><a href="#Operator-——-操作符（事件变换）" class="headerlink" title="Operator —— 操作符（事件变换）"></a>Operator —— 操作符（事件变换）</h2><p>以上的介绍是使用 Rxjava 要了解的基础，而事件变换才是 rxjava 的精髓。 </p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>操作符包括Schedulers的线程控制大部分是基于基础变换方法 <code>lift(Operator)</code>加上 <code>Operator 变换器</code> 实现。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> &lt;R&gt; <span class="function">Observable&lt;R&gt; <span class="title">lift</span><span class="params">(<span class="keyword">final</span> Operator&lt;? extends R, ? <span class="keyword">super</span> T&gt; operator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Observable&lt;R&gt;(<span class="keyword">new</span> OnSubscribeLift&lt;T, R&gt;(onSubscribe, operator));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到，lift返回了一个新的 <code>Observable</code> , 而原来的 onSubscribe 作为参数和 operator 一起传入到新的 <code>Observable</code> 中。<br>Operator 会通过自己的 call() 方法将新 Subscriber 和原始 Subscriber 进行关联，并插入自己的<strong>变换</strong>代码以实现变换。</p>
<p>基本的实现思想：执行变换之后，会返回一个新的Observable,而这个新的Observable会负责接收旧的Observable,并通过Operator进行转化。<br>一个将String转变为Integer的例子：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">observable.lift(<span class="keyword">new</span> Observable.Operator&lt;String, Integer&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Subscriber&lt;? <span class="keyword">super</span> Integer&gt; call(<span class="keyword">final</span> Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber) &#123;</span><br><span class="line">        <span class="comment">// 将事件序列中的 Integer 对象转换为 String 对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Subscriber&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                subscriber.onNext(<span class="string">""</span> + integer);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                subscriber.onCompleted();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">                subscriber.onError(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h3><h4 id="与Retrofit的结合"><a href="#与Retrofit的结合" class="headerlink" title="与Retrofit的结合"></a>与<a href="https://github.com/square/retrofit" target="_blank" rel="noopener">Retrofit</a>的结合</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.squareup.retrofit2:retrofit:2.1.0'</span></span><br><span class="line">compile <span class="string">'com.squareup.retrofit2:adapter-rxjava:2.1.0'</span></span><br></pre></td></tr></table></figure>
<p>Retrofit的请求，返回一个 <code>Observable</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GET</span>(HttpUtil.WIKI)</span><br><span class="line"><span class="function">Observable&lt;WikiBean&gt; <span class="title">getWiki</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        @Query(<span class="string">"wiki_id"</span>)</span> <span class="keyword">long</span> wiki_id</span></span><br><span class="line"><span class="function">)</span>;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">getWiki(wiki_id)</span><br><span class="line">.subscribeOn(Schedulers.io())</span><br><span class="line">.observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">.subscribe(<span class="keyword">new</span> Subscriber&lt;ApiResponse&lt;RadioDetailData&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(WikiBean wiki)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="RxBinding"><a href="#RxBinding" class="headerlink" title="RxBinding"></a><a href="https://github.com/JakeWharton/RxBinding" target="_blank" rel="noopener">RxBinding</a></h4><blockquote>
<p>RxJava binding APIs for Android’s UI widgets.</p>
</blockquote>
<p>一套基于Android平台的Binging API,举个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RxView.clickEvents(button) <span class="comment">// 以 Observable 形式来反馈点击事件</span></span><br><span class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;ViewClickEvent&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(ViewClickEvent event)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// Click handling</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="RxBus"><a href="#RxBus" class="headerlink" title="RxBus"></a>RxBus</h4><p>使用 eventbus 或者 otto 的思想用 rxjava 来替代。实现思路可以参考 <a href="http://blog.kaush.co/2014/12/24/implementing-an-event-bus-with-rxjava-rxbus/" target="_blank" rel="noopener">rxbus</a>这篇文章。</p>
<h2 id="Rxjava-各类操作符实例"><a href="#Rxjava-各类操作符实例" class="headerlink" title="Rxjava 各类操作符实例"></a>Rxjava 各类操作符实例</h2><p>总算到了最重要的部分了，这一部分用来演示常用的操作符，尽量覆盖完全。</p>
<h3 id="创建类Obervable"><a href="#创建类Obervable" class="headerlink" title="创建类Obervable"></a>创建类Obervable</h3><h4 id="create"><a href="#create" class="headerlink" title="create"></a>create</h4><p><img src="http://reactivex.io/documentation/operators/images/create.c.png" alt="create"><br>从新建造一个 Observable 以便调用 Observer，举个例子<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;String&gt; observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</span><br><span class="line">        subscriber.onNext(<span class="string">"cpacm"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">observable.subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 输出：cpacm</span></span><br></pre></td></tr></table></figure></p>
<h4 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h4><p>延迟 Observable 的创建直到被订阅，举个例子<br><img src="http://reactivex.io/documentation/operators/images/defer.c.png" alt="defer"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Observable&lt;String&gt; <span class="title">createObservable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"create observable"</span>);</span><br><span class="line">    Observable&lt;String&gt; observable = Observable.create(<span class="keyword">new</span> Observable.OnSubscribe&lt;String&gt;() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Subscriber&lt;? <span class="keyword">super</span> String&gt; subscriber)</span> </span>&#123;</span><br><span class="line">            subscriber.onNext(<span class="string">"cpacm"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> observable;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">defer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Observable&lt;String&gt; observable = Observable.defer(<span class="keyword">new</span> Func0&lt;Observable&lt;String&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Observable&lt;String&gt; <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"defer"</span>);</span><br><span class="line">            <span class="keyword">return</span> createObservable();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(<span class="string">"subscribe"</span>);</span><br><span class="line">    observable.subscribe(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*输出：</span></span><br><span class="line"><span class="comment">subscribe</span></span><br><span class="line"><span class="comment">defer</span></span><br><span class="line"><span class="comment">create observable</span></span><br><span class="line"><span class="comment">cpacm</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Empty-Never-Throw"><a href="#Empty-Never-Throw" class="headerlink" title="Empty/Never/Throw"></a>Empty/Never/Throw</h4><ul>
<li>Empty:创建一个 Observable 不发送数据，正常结束；</li>
<li>Never:创建一个 Observable 不发送数据，不会终止；</li>
<li>Throw:创建一个 Observable 不发送数据，终止时发出一个错误。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Observable.empty().subscribe(<span class="keyword">new</span> Subscriber&lt;Object&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"empty:complete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"empty:error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"empty:next"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observable.never().subscribe(<span class="keyword">new</span> Subscriber&lt;Object&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"never:complete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"never:error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"never:next"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Observable.error(<span class="keyword">new</span> NullPointerException()).subscribe(<span class="keyword">new</span> Subscriber&lt;Object&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompleted</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"error:complete"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"error:error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onNext</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"error:next"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*输出：</span></span><br><span class="line"><span class="comment">empty:complete</span></span><br><span class="line"><span class="comment">error:error</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="from"><a href="#from" class="headerlink" title="from"></a>from</h4><p>从列表中发出数据，并按顺序发射<br><img src="http://reactivex.io/documentation/operators/images/from.c.png" alt="from"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String[] name = <span class="keyword">new</span> String[]&#123;<span class="string">"c"</span>,<span class="string">"p"</span>,<span class="string">"a"</span>,<span class="string">"c"</span>,<span class="string">"m"</span>&#125;;</span><br><span class="line">Observable.from(name).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出：c p a c m</span></span><br></pre></td></tr></table></figure></p>
<h4 id="interval"><a href="#interval" class="headerlink" title="interval"></a>interval</h4><p>轮询，每隔一定时间重新发射<br><img src="http://reactivex.io/documentation/operators/images/interval.c.png" alt="interval"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出：0 1 2 3 4 ... 间隔1秒</span></span><br></pre></td></tr></table></figure></p>
<h4 id="just"><a href="#just" class="headerlink" title="just"></a>just</h4><p>单次发射<br><img src="http://reactivex.io/documentation/operators/images/just.c.png" alt="just"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="string">"cpacm"</span>).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出：cpacm</span></span><br></pre></td></tr></table></figure></p>
<p>just()方法可以传入一到九个参数，它们会按照传入的参数的顺序来发射它们。just()方法也可以接受列表或数组，就像from()方法，但是它不会迭代列表发射每个值,它将会发射整个列表。通常，当我们想发射一组已经定义好的值时会用到它。</p>
<h4 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h4><p>在指定范围内发射数据,range(int start,int count)<br><img src="http://reactivex.io/documentation/operators/images/range.c.png" alt="range"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Observable.range(<span class="number">2</span>,<span class="number">5</span>).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出：2,3,4,5,6</span></span><br></pre></td></tr></table></figure></p>
<h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><p>重复发射数据,可填写数字控制重复次数<br><img src="http://reactivex.io/documentation/operators/images/repeat.c.png" alt="repeat"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重复发射3次</span></span><br><span class="line">Observable.just(<span class="string">"cpacm"</span>).repeat(<span class="number">3</span>).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出：cpacm cpacm cpacm</span></span><br></pre></td></tr></table></figure></p>
<h4 id="start"><a href="#start" class="headerlink" title="start"></a>start</h4><p>需要额外模块，以后再补充</p>
<h4 id="timer"><a href="#timer" class="headerlink" title="timer"></a>timer</h4><p>一定时间后发射数据，然后完成<br><img src="http://reactivex.io/documentation/operators/images/timer.c.png" alt="timer"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Observable.timer(<span class="number">3</span>,TimeUnit.SECONDS).subscribe(System.out::println);</span><br><span class="line"><span class="comment">// 3秒后输出：0</span></span><br></pre></td></tr></table></figure></p>
<h3 id="变换类Obervable"><a href="#变换类Obervable" class="headerlink" title="变换类Obervable"></a>变换类Obervable</h3><h4 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h4><p>将一个个数据按照count和skip组装成一组数据再发射。也可以通过其他buffer方式进行组装。<br><img src="http://reactivex.io/documentation/operators/images/buffer4.png" alt="buffer1"><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">    list.add(i);</span><br><span class="line">&#125;</span><br><span class="line">Observable.from(list).buffer(<span class="number">4</span>, <span class="number">3</span>).subscribe(<span class="keyword">new</span> Action1&lt;List&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(List&lt;Integer&gt; integers)</span> </span>&#123;</span><br><span class="line">        System.out.println(integers);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出：</span></span><br><span class="line"><span class="comment"> [0, 1, 2, 3]</span></span><br><span class="line"><span class="comment"> [3, 4, 5, 6]</span></span><br><span class="line"><span class="comment"> [6, 7, 8, 9]</span></span><br><span class="line"><span class="comment"> [9, 10, 11, 12]</span></span><br><span class="line"><span class="comment"> [12, 13, 14, 15]</span></span><br><span class="line"><span class="comment"> [15, 16, 17, 18]</span></span><br><span class="line"><span class="comment"> [18, 19]</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>RxJava的map函数接收一个指定的Func对象然后将它应用到每一个由Observable发射的值上<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> Observable.range(<span class="number">0</span>, <span class="number">5</span>)</span><br><span class="line">        .map(<span class="keyword">new</span> Func1&lt;Integer, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> String.valueOf(integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">// 输出： 0 1 2 3 4</span></span><br></pre></td></tr></table></figure></p>
<h4 id="FlatMap"><a href="#FlatMap" class="headerlink" title="FlatMap"></a>FlatMap</h4><p><img src="http://reactivex.io/documentation/operators/images/flatMap.c.png" alt="flatmap"></p>
<blockquote>
<p>注意：这里返回是乱序的  </p>
</blockquote>
<p>在 FlatMap 中可以生成新的 Observable 来替代原来的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Line</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Integer[] points;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Line</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        points = <span class="keyword">new</span> Integer[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Line line = <span class="keyword">new</span> Line();</span><br><span class="line">Observable.just(line)</span><br><span class="line">        .flatMap(<span class="keyword">new</span> Func1&lt;Line, Observable&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Observable&lt;Integer&gt; <span class="title">call</span><span class="params">(Line line)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> Observable.from(line.points);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                System.out.println(integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">// 输出： 1 2 3 4 5</span></span><br></pre></td></tr></table></figure>
<h4 id="ConcatMap"><a href="#ConcatMap" class="headerlink" title="ConcatMap"></a>ConcatMap</h4><p><img src="http://reactivex.io/documentation/operators/images/concatMap.png" alt="concatMap"><br>ConcatMap 与 FlatMap 相比是有序的发射数据<br><a href="http://www.jianshu.com/p/6d16805537ef" target="_blank" rel="noopener">.concatMap()与.flatMap()的比较</a></p>
<h4 id="SwitchMap"><a href="#SwitchMap" class="headerlink" title="SwitchMap"></a>SwitchMap</h4><p><img src="http://reactivex.io/documentation/operators/images/switchMap.png" alt><br>switchMap()和flatMap()很像，除了一点：每当源Observable发射一个新的数据项（Observable）时，它将取消订阅并停止监视之前那个数据项产生的Observable，并开始监视当前发射的这一个。</p>
<h4 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h4><p><img src="http://reactivex.io/documentation/operators/images/groupBy.c.png" alt="GroupBy"><br>groupBy操作符是对源Observable产生的结果进行分组，形成一个类型为GroupedObservable的结果集，GroupedObservable中存在一个方法为getKey()，可以通过该方法获取结果集的Key值（类似于HashMap的key)。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    list.add(String.valueOf(i));</span><br><span class="line">&#125;</span><br><span class="line">Observable.from(list)</span><br><span class="line">    .groupBy(<span class="keyword">new</span> Func1&lt;String, Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> Integer.valueOf(s) % <span class="number">3</span>;<span class="comment">//分成3组</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .subscribe(<span class="keyword">new</span> Action1&lt;GroupedObservable&lt;Integer, String&gt;&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(GroupedObservable&lt;Integer, String&gt; integerStringGroupedObservable)</span> </span>&#123;</span><br><span class="line">            integerStringGroupedObservable.subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">"key:"</span> + integerStringGroupedObservable.getKey() + <span class="string">",value:"</span> + s);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="comment">//输出：</span></span><br><span class="line"><span class="comment">/* key:0,value:0</span></span><br><span class="line"><span class="comment">*  key:1,value:1</span></span><br><span class="line"><span class="comment">*  key:2,value:2</span></span><br><span class="line"><span class="comment">*  key:0,value:3</span></span><br><span class="line"><span class="comment">*  key:1,value:4</span></span><br><span class="line"><span class="comment">*  key:2,value:5</span></span><br><span class="line"><span class="comment">*  key:0,value:6</span></span><br><span class="line"><span class="comment">*  key:1,value:7</span></span><br><span class="line"><span class="comment">*  key:2,value:8</span></span><br><span class="line"><span class="comment">*  key:0,value:9</span></span><br><span class="line"><span class="comment">*  */</span></span><br></pre></td></tr></table></figure></p>
<h4 id="Scan"><a href="#Scan" class="headerlink" title="Scan"></a>Scan</h4><p><img src="http://reactivex.io/documentation/operators/images/scan.png" alt="scan"><br>scan操作符对一个序列的数据应用一个函数，并将这个函数的结果发射出去作为下个数据应用这个函数时候的第一个参数使用，有点类似于递归操作<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Observable.range(<span class="number">1</span>, <span class="number">10</span>).scan(<span class="keyword">new</span> Func2&lt;Integer, Integer, Integer&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">(Integer sum, Integer integer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sum + integer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(System.out::println);</span><br><span class="line"><span class="comment">//输出： 1 3 6 10 15 21 28 36 45 55</span></span><br><span class="line"><span class="comment">//tip: 1、第一个数不会调用scan中的方法;2、参数sum是上一个返回的数，integer是新传入的数</span></span><br></pre></td></tr></table></figure></p>
<h4 id="window"><a href="#window" class="headerlink" title="window"></a>window</h4><p><img src="http://reactivex.io/documentation/operators/images/window.C.png" alt="window"><br>RxJava的window()函数和buffer()很像，但是它发射的是Observable而不是列表.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Observable.range(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line">        .window(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;Observable&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Observable&lt;Integer&gt; integerObservable)</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"-----group"</span>);</span><br><span class="line">                integerObservable.subscribe(<span class="keyword">new</span> Action1&lt;Integer&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                        System.out.println(<span class="string">"value:"</span>+ integer);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">/* 输出：</span></span><br><span class="line"><span class="comment">*  -----group</span></span><br><span class="line"><span class="comment">*  value:0</span></span><br><span class="line"><span class="comment">*  value:1</span></span><br><span class="line"><span class="comment">*  value:2</span></span><br><span class="line"><span class="comment">*  -----group</span></span><br><span class="line"><span class="comment">*  value:3</span></span><br><span class="line"><span class="comment">*  value:4</span></span><br><span class="line"><span class="comment">*  value:5</span></span><br><span class="line"><span class="comment">*  -----group</span></span><br><span class="line"><span class="comment">*  value:6</span></span><br><span class="line"><span class="comment">*  value:7</span></span><br><span class="line"><span class="comment">*  value:8</span></span><br><span class="line"><span class="comment">*  -----group</span></span><br><span class="line"><span class="comment">*  value:9</span></span><br><span class="line"><span class="comment">* */</span></span><br></pre></td></tr></table></figure></p>
<h3 id="过滤类Obervable"><a href="#过滤类Obervable" class="headerlink" title="过滤类Obervable"></a>过滤类Obervable</h3><h4 id="Debounce"><a href="#Debounce" class="headerlink" title="Debounce"></a>Debounce</h4><p><img src="http://reactivex.io/documentation/operators/images/debounce.png" alt="debounce"><br>触发后等待一段时间后发射，期间被重新触发则重置时间开始新的等待。</p>
<blockquote>
<p>使用场景：搜索框输入文字后需要在一段时间内无操作后访问服务器获取数据。</p>
</blockquote>
<h4 id="Distinct"><a href="#Distinct" class="headerlink" title="Distinct"></a>Distinct</h4><p><img src="http://reactivex.io/documentation/operators/images/distinct.png" alt="distinct"><br>对序列使用distinct()函数去掉重复的数据</p>
<h4 id="ElementAt-elementAtOrDefault"><a href="#ElementAt-elementAtOrDefault" class="headerlink" title="ElementAt/elementAtOrDefault"></a>ElementAt/elementAtOrDefault</h4><p>elementAt()函数仅从一个序列中发射第n个元素然后就完成了。如果我们想查找第五个元素但是可观测序列只有三个元素可供发射时该怎么办？我们可以使用elementAtOrDefault()。</p>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>RxJava让我们使用filter()方法来过滤我们观测序列中不想要的值<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Observable.range(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line">        .filter(<span class="keyword">new</span> Func1&lt;Integer, Boolean&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> Boolean <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> integer%<span class="number">2</span>==<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                System.out.println(integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">//输出：0 2 4 6 8</span></span><br></pre></td></tr></table></figure></p>
<h4 id="First-last"><a href="#First-last" class="headerlink" title="First/last"></a>First/last</h4><p>first()方法和last()方法很容易弄明白。它们从Observable中只发射第一个元素或者最后一个元素。</p>
<h4 id="ignoreElements"><a href="#ignoreElements" class="headerlink" title="ignoreElements"></a>ignoreElements</h4><p>忽略所有的数据，只在终止时有反应</p>
<h4 id="Sample"><a href="#Sample" class="headerlink" title="Sample"></a>Sample</h4><p>在Observable后面加一个sample()，我们将创建一个新的可观测序列，它将在一个指定的时间间隔里由Observable发射最近一次的数值</p>
<h4 id="take-takeLast"><a href="#take-takeLast" class="headerlink" title="take/takeLast"></a>take/takeLast</h4><p>take()函数用整数N来作为一个参数，从原始的序列中发射前N个元素，然后完成。<br>takeLast，从原始的序列中发射后N个元素，然后完成。</p>
<h4 id="skip-skipLast"><a href="#skip-skipLast" class="headerlink" title="skip/skipLast"></a>skip/skipLast</h4><p>跳过前面或者后N个元素</p>
<h3 id="组合类Obervable"><a href="#组合类Obervable" class="headerlink" title="组合类Obervable"></a>组合类Obervable</h3><h4 id="And-Then-When"><a href="#And-Then-When" class="headerlink" title="And/Then/When"></a>And/Then/When</h4><p>属于<code>rxjava-joins</code>模块</p>
<h4 id="combineLatest"><a href="#combineLatest" class="headerlink" title="combineLatest"></a>combineLatest</h4><p><img src="http://reactivex.io/documentation/operators/images/combineLatest.png" alt="combineLatest"><br>将两个队列通过fun方法联合，注意联合的两个数据分别为各个队列当前最后发射的数据。（若其中一个队列未发射数据，fun方法不会发生）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Long&gt; oa = Observable.interval(<span class="number">2</span>, TimeUnit.SECONDS).map(<span class="keyword">new</span> Func1&lt;Long, Long&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">call</span><span class="params">(Long aLong)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span> + aLong;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Observable&lt;Long&gt; ob = Observable.interval(<span class="number">3</span>, TimeUnit.SECONDS);</span><br><span class="line">Observable</span><br><span class="line">        .combineLatest(oa, ob, <span class="keyword">new</span> Func2&lt;Long, Long, String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(Long aLong, Long aLong2)</span> </span>&#123;</span><br><span class="line">                Long value = aLong + aLong2;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"oa:"</span> + aLong + <span class="string">",ob:"</span> + aLong2 + <span class="string">",value:"</span> + value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  输出：</span></span><br><span class="line"><span class="comment"> *  oa:100,ob:0,value:100</span></span><br><span class="line"><span class="comment"> *  oa:101,ob:0,value:101</span></span><br><span class="line"><span class="comment"> *  oa:102,ob:0,value:102</span></span><br><span class="line"><span class="comment"> *  oa:102,ob:1,value:103</span></span><br><span class="line"><span class="comment"> *  oa:103,ob:1,value:104</span></span><br><span class="line"><span class="comment"> *  oa:103,ob:2,value:105</span></span><br><span class="line"><span class="comment"> *  oa:104,ob:2,value:106</span></span><br><span class="line"><span class="comment"> *  oa:105,ob:2,value:107</span></span><br><span class="line"><span class="comment"> *  oa:105,ob:3,value:108</span></span><br><span class="line"><span class="comment"> *  ...</span></span><br><span class="line"><span class="comment"> * */</span></span><br></pre></td></tr></table></figure></p>
<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><p><img src="http://reactivex.io/documentation/operators/images/join_.png" alt="join"><br>如果一个Observable发射了一个数据项，只要在另一个Observable发射的数据项定义的时间窗口内，就将两个Observable发射的数据合并发射<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Long&gt; oa = Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS).map(aLong -&gt; <span class="number">1000</span> + aLong);</span><br><span class="line">Observable&lt;Long&gt; ob = Observable.interval(<span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">oa.join(ob, <span class="keyword">new</span> Func1&lt;Long, Observable&lt;Long&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Observable&lt;Long&gt; <span class="title">call</span><span class="params">(Long aLong)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Observable.timer(<span class="number">2</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="keyword">new</span> Func1&lt;Long, Observable&lt;Long&gt;&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Observable&lt;Long&gt; <span class="title">call</span><span class="params">(Long aLong)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Observable.timer(<span class="number">2</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, <span class="keyword">new</span> Func2&lt;Long, Long, String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(Long aLong, Long aLong2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"oa:"</span> + String.valueOf(aLong) + <span class="string">",ob:"</span> + String.valueOf(aLong2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(<span class="keyword">new</span> Action1&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//  解释：</span></span><br><span class="line"><span class="comment">//  join有4个参数，oa.join(ob,leftFunc,rightFunc,resultFunc),leftFunc和rightFunc都会返回一个Observable.</span></span><br><span class="line"><span class="comment">//  oa对应leftFunc,从oa进入leftFunc的Observable到被发射,我们称其为oa时间段</span></span><br><span class="line"><span class="comment">//  ob对应rightFunc,同理ob也有一个时间段</span></span><br><span class="line"><span class="comment">//  假设oa时间段，此时oa数据为1000，ob队列发射了0,1两个数据，那么最后rightFunc会被调用2次（排列组合），其分别为</span></span><br><span class="line"><span class="comment">//  1000 0</span></span><br><span class="line"><span class="comment">//  1000 1</span></span><br><span class="line"><span class="comment">//  同理，ob时间段，此时ob数据为0，oa队列发射了1000,1001两个数据，那么最后rightFunc会被调用2次（排列组合），为</span></span><br><span class="line"><span class="comment">//  1000 0</span></span><br><span class="line"><span class="comment">//  1001 0</span></span><br></pre></td></tr></table></figure></p>
<h4 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h4><p><img src="http://reactivex.io/documentation/operators/images/mergeDelayError.C.png" alt="merge"><br>合并多个序列,根据时间排序<br>mergeDelayError：它能从一个Observable中继续发射数据即便是其中有一个抛出了错误</p>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p><img src="http://reactivex.io/documentation/operators/images/zip.o.png" alt="zip"><br>zip() 合并两个或者多个Observables发射出的数据项，根据指定的函数Func* 变换它们，并发射一个新值。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;Long&gt; oa = Observable.interval(<span class="number">2</span>, TimeUnit.SECONDS).map(aLong -&gt; <span class="number">1000</span> + aLong);</span><br><span class="line">Observable&lt;Long&gt; ob = Observable.interval(<span class="number">4</span>, TimeUnit.SECONDS);</span><br><span class="line">Observable.zip(oa, ob, <span class="keyword">new</span> Func2&lt;Long, Long, String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">(Long aLong, Long aLong2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"oa:"</span> + String.valueOf(aLong) + <span class="string">",ob:"</span> + String.valueOf(aLong2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(System.out::println);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  输出：</span></span><br><span class="line"><span class="comment"> *  oa:1000,ob:0</span></span><br><span class="line"><span class="comment"> *  oa:1001,ob:1</span></span><br><span class="line"><span class="comment"> *  oa:1002,ob:2</span></span><br><span class="line"><span class="comment"> *  oa:1003,ob:3</span></span><br><span class="line"><span class="comment"> *  oa:1004,ob:4</span></span><br><span class="line"><span class="comment"> *  ...</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="comment">//tip: 必定一一对应进行压缩合并</span></span><br></pre></td></tr></table></figure></p>
<h3 id="其他操作符"><a href="#其他操作符" class="headerlink" title="其他操作符"></a>其他操作符</h3><blockquote>
<p>  <strong>materialize( )</strong> — 将Observable转换成一个通知列表convert an Observable into a list of Notifications<br>    <strong>dematerialize( )</strong> — 将上面的结果逆转回一个Observable<br>    <strong>timestamp( )</strong> — 给Observable发射的每个数据项添加一个时间戳<br>    <strong>serialize( )</strong> — 强制Observable按次序发射数据并且要求功能是完好的<br>    <strong>cache( )</strong> — 记住Observable发射的数据序列并发射相同的数据序列给后续的订阅者<br>    <strong>observeOn( )</strong> — 指定观察者观察Observable的调度器<br>    <strong>subscribeOn( )</strong> — 指定Observable执行任务的调度器<br>    <strong>doOnEach( )</strong> — 注册一个动作，对Observable发射的每个数据项使用<br>    <strong>doOnCompleted( )</strong> — 注册一个动作，对正常完成的Observable使用<br>    <strong>doOnError( )</strong> — 注册一个动作，对发生错误的Observable使用<br>    <strong>doOnTerminate( )</strong> — 注册一个动作，对完成的Observable使用，无论是否发生错误<br>    <strong>doOnSubscribe( )</strong> — 注册一个动作，在观察者订阅时使用<br>    <strong>doOnUnsubscribe( )</strong> — 注册一个动作，在观察者取消订阅时使用<br>    <strong>finallyDo( )</strong> — 注册一个动作，在Observable完成时使用<br>    <strong>delay( )</strong> — 延时发射Observable的结果<br>    <strong>delaySubscription( )</strong> — 延时处理订阅请求<br>    <strong>timeInterval( )</strong> — 定期发射数据<br>    <strong>using( )</strong> — 创建一个只在Observable生命周期存在的资源<br>    <strong>single( )</strong> — 强制返回单个数据，否则抛出异常<br>    <strong>singleOrDefault( )</strong> — 如果Observable完成时返回了单个数据，就返回它，否则返回默认数据<br>    <strong>toFuture( ), toIterable( ), toList( )</strong> — 将Observable转换为其它对象或数据结构</p>
</blockquote>
<h3 id="StrictMode"><a href="#StrictMode" class="headerlink" title="StrictMode"></a>StrictMode</h3><p>StrictMode帮助我们侦测敏感的活动，如我们无意的在主线程执行磁盘访问或者网络调用。正如你所知道的，在主线程执行繁重的或者长时的任务是不可取的。因为Android应用的主线程时UI线程，它被用来处理和UI相关的操作：这也是获得更平滑的动画体验和响应式App的唯一方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (BuildConfig.DEBUG) &#123;</span><br><span class="line">    StrictMode.setThreadPolicy(<span class="keyword">new</span> StrictMode.ThreadPolicy.Builder().detectAll().penaltyLog().build()); </span><br><span class="line">    StrictMode.setVmPolicy(<span class="keyword">new</span> StrictMode.VmPolicy.Builder().detectAll().penaltyLog().build());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://gank.io/post/560e15be2dca930e00da1083" target="_blank" rel="noopener">给 Android 开发者的 RxJava 详解</a><br><a href="http://reactivex.io/" target="_blank" rel="noopener">reactivex官方文档</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:348515494@qq.com">cpacm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.cpacm.net/2016/09/21/Rxjava使用帮助/">http://www.cpacm.net/2016/09/21/Rxjava使用帮助/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.cpacm.net">cpacm</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Android/">Android    </a><a class="post-meta__tags" href="/tags/java/">java    </a></div><div class="post_share"><div class="social-share" data-image="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/rxjava.jpg" data-sites="facebook,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2016/10/30/Beats——一款基于萌否网站api的音乐管理软件/"><img class="prev_cover lozad" data-src="/img/android.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>开源客户端：Beats —— 一款基于萌否网站api的音乐管理软件</span></div></a></div><div class="next-post pull-right"><a href="/2016/06/03/开源项目：一个高度自由的轻量化Slider/"><img class="next_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/simple_slider.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>开源项目：一个高度自由的轻量化Slider</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2018/05/10/Android高级开发进阶——前言/" title="Android高级开发进阶之路——前言"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/android.jpg"><div class="relatedPosts_title">Android高级开发进阶之路——前言</div></a></div><div class="relatedPosts_item"><a href="/2019/11/20/ASM使用笔记/" title="ASM使用笔记"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/ASM_time.png"><div class="relatedPosts_title">ASM使用笔记</div></a></div><div class="relatedPosts_item"><a href="/2019/11/20/Android上的AOP方案及其优缺点/" title="Android上的AOP方案及其优缺点"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/java%20compile.png"><div class="relatedPosts_title">Android上的AOP方案及其优缺点</div></a></div><div class="relatedPosts_item"><a href="/2019/11/06/Android进阶之路——模块化实践/" title="Android项目模块化"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/android%20module.jpg"><div class="relatedPosts_title">Android项目模块化</div></a></div><div class="relatedPosts_item"><a href="/2019/09/06/PDF转化图片及其优化/" title="PDF转化图片及其优化"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/pdfiumX2.png"><div class="relatedPosts_title">PDF转化图片及其优化</div></a></div><div class="relatedPosts_item"><a href="/2019/09/03/热敏打印机技术报告/" title="热敏打印机技术报告"><img class="relatedPosts_cover lozad" data-src="https://cpacmblog.oss-cn-hangzhou.aliyuncs.com/thermal_printer.jpg"><div class="relatedPosts_title">热敏打印机技术报告</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://www.cpacm.net/2016/09/21/Rxjava使用帮助/';
  this.page.identifier = '2016/09/21/Rxjava使用帮助/';
  this.page.title = 'Rxjava使用帮助';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'cpacm-net' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2019 By cpacm</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">簡</a><i class="fa fa-moon-o nightshift" id="nightshift" title="夜间模式"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script async src="/js/search/local-search.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>